///////////////////////////////////////////////////////////////////////////
//
//  X_FIXED.H
//
///////////////////////////////////////////////////////////////////////////

#ifndef X_FIXED_H
#define X_FIXED_H

///////////////////////////////////////////////////////////////////////////
// INCLUDES
///////////////////////////////////////////////////////////////////////////

#include "x_types.h"

///////////////////////////////////////////////////////////////////////////
// BASIC DEFINES
///////////////////////////////////////////////////////////////////////////

#define FIXED_PRECISION_BITS ( 16 )
#define FIXED_ONE            ((fixed)( 1 << FIXED_PRECISION_BITS ))

///////////////////////////////////////////////////////////////////////////
// BASIC OPERATIONS
///////////////////////////////////////////////////////////////////////////

#define FIXED_MUL(A,B)       ((fixed)((((s64)(A)) * (B)) >> FIXED_PRECISION_BITS ))
#define FIXED_DIV(A,B)       ((fixed)((((s64)(A)) << FIXED_PRECISION_BITS ) / (B))))
#define FIXED_MULDIV(A,B,C)  ((fixed)((((s64)(A)) * ((s64)(B))) / (C)))

///////////////////////////////////////////////////////////////////////////
// CONVERSION MACROS
///////////////////////////////////////////////////////////////////////////

#define FIXED_TO_FLOAT(A)    ((A) * (1.0f / FIXED_ONE))
#define FLOAT_TO_FIXED(A)    ((fixed)((A) * FIXED_ONE))
#define INT_TO_FIXED(A)      (((fixed)(A)) << FIXED_PRECISION_BITS )
#define FIXED_TO_INT(A)      ((A) >> FIXED_PRECISION_BITS )

///////////////////////////////////////////////////////////////////////////
// END
///////////////////////////////////////////////////////////////////////////

#endif